!function(t,r){"use strict";"function"==typeof define&&define.amd?define([],r):"object"==typeof exports?module.exports=r():t.linearAlgebra=r()}(this,function(){"use strict";var t=function(t){throw new Error("linear-algebra: "+t)},r=function(r,o,s){t(r+": op1 is "+o.rows+" * "+o.cols+" and op2 is "+s.rows+" * "+s.cols)};return function(t){t=t||{},t.add&&console.warn("linear-algebra: adder (options.add) will not be used in non-precision version");var o={},s=o.Matrix=function(t){Array.isArray(t[0])?(this.data=t,this.rows=this.data.length,this.cols=this.data[0]):(this.data=[t],this.rows=this.data[0],this.cols=t.length)};s.prototype.clone=function(){for(var t=this.data,r=this.rows,o=new Array(r),i=0;r>i;++i)o[i]=t[i].slice(0);return new s(o)},s.prototype.trans=function(){var t,r,o,s=this.data,i=this.rows,a=this.cols,n=a===i,e=a>i?i:a;for(t=0;e>t;++t)for(r=t+1;e>r;++r)o=s[r][t],s[r][t]=s[t][r],s[t][r]=o;if(!n){if(a>i)for(r=i;a>r;++r)for(Array.isArray(s[r])||(s[r]=new Array(i)),t=0;i>t;++t)s[r][t]=s[t][r];else for(t=a;i>t;++t)for(r=0;a>r;++r)s[r][t]=s[t][r];o=i,this.rows=a,this.cols=o}return this},s.identity=function(t){return s.scalar(t,1)},s.scalar=function(t,r){var o,i,a=new Array(t);for(o=0;t>o;++o){for(a[o]=new Array(t),i=0;t>i;++i)a[o][i]=0;a[o][o]=r}return new s(a)};o.Vector={zero:function(t){for(var r=new Array(t),o=0;t>o;++o)r[o]=0;return new s(r)}};return s.prototype.mulEach=function(t){var o=this.data,s=this.rows,i=this.cols,a=t.data,n=t.rows,e=t.cols;(s!==n||i!==e)&&r("mulEach",this,t);var h,c;for(h=0;s>h;++h)for(c=0;i>c;++c)o[h][c]*=a[h][c];return this},s.prototype.minusEach=function(t){var o=this.data,s=this.rows,i=this.cols,a=t.data,n=t.rows,e=t.cols;(s!==n||i!==e)&&r("minusEach",this,t);var h,c;for(h=0;s>h;++h)for(c=0;i>c;++c)o[h][c]-=a[h][c];return this},s.prototype.plusEach=function(t){var o=this.data,s=this.rows,i=this.cols,a=t.data,n=t.rows,e=t.cols;(s!==n||i!==e)&&r("plusEach",this,t);var h,c;for(h=0;s>h;++h)for(c=0;i>c;++c)o[h][c]+=a[h][c];return this},s.prototype.dot=function(t){var o=this.data,s=this.rows,i=this.cols,a=(t.data,t.rows),n=t.cols;i!==a&&r("dot",this,t);var e,h,c,f;for(e=0;s>e;++e)for(f=o[e].slice(0,i),c=0;n>c;++c)for(o[e][c]=0,h=0;a>h;++h)o[e][c]+=f[c]*t[h][c];return this.cols=n,this},s.prototype.getSum=function(){for(var t=this.data,r=this.rows,o=this.cols,s=0,i=0;r>i;++i)for(var a=0;o>a;++a)s+=t[i][a];return s},s.prototype.apply=function(t){var r,o,s=this.data,i=this.rows,a=this.cols;for(r=0;i>r;++r)for(o=0;a>o;++o)s[r][o]=t(s[r][o]);return this},s.prototype.ln=function(){var t,r,o=this.data,s=this.rows,i=this.cols;for(t=0;s>t;++t)for(r=0;i>r;++r)o[t][r]=Math.log(o[t][r]);return this},s.prototype.sigmoid=function(){var t,r,o=this.data,s=this.rows,i=this.cols;for(t=0;s>t;++t)for(r=0;i>r;++r)o[t][r]=1/(1+Math.exp(-o[t][r]));return this},s.prototype.mul=function(t){var r,o,s=this.data,i=this.rows,a=this.cols;for(r=0;i>r;++r)for(o=0;a>o;++o)s[r][o]*=t;return this},s.prototype.plus=function(t){var r,o,s=this.data,i=this.rows,a=this.cols;for(r=0;i>r;++r)for(o=0;a>o;++o)s[r][o]+=t;return this},o}});