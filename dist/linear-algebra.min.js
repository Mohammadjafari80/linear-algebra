!function(r,t){"use strict";"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():r.linearAlgebra=t()}(this,function(){"use strict";var r=function(r){throw new Error("linear-algebra: "+r)},t=function(t,o,s){r("["+t+"] op1 is "+o.rows+" x "+o.cols+" and op2 is "+s.rows+" x "+s.cols)};return function(r){r=r||{};var o={},s=o.Matrix=function(r){Array.isArray(r[0])?(this.data=r,this.rows=r.length,this.cols=r[0].length):(this.data=[r],this.rows=1,this.cols=r.length)};s.prototype.clone=function(){for(var r=this.data,t=this.rows,o=this.cols,a=new Array(t),i=0;t>i;++i)a[i]=r[i].slice(0,o);return new s(a)},s.identity=function(r){return s.scalar(r,1)},s.scalar=function(r,t){var o,a,i=new Array(r);for(o=0;r>o;++o){for(i[o]=new Array(r),a=0;r>a;++a)i[o][a]=0;i[o][o]=t}return new s(i)};o.Vector={zero:function(r){for(var t=new Array(r),o=0;r>o;++o)t[o]=0;return new s(t)}};return r.add&&console.warn("linear-algebra: adder (options.add) will not be used in non-precision version"),s.prototype.trans=function(){var r,t,o=this.data,a=this.rows,i=this.cols,n=new Array(i);for(t=0;i>t;++t)for(n[t]=new Array(a),r=0;a>r;++r)n[t][r]=o[r][t];return new s(n)},s.prototype.trans_=function(){var r,t,o,s=this.data,a=this.rows,i=this.cols,n=i===a,e=i>a?a:i;for(r=0;e>r;++r)for(t=r+1;e>t;++t)o=s[t][r],s[t][r]=s[r][t],s[r][t]=o;if(!n){if(i>a)for(t=a;i>t;++t)for(Array.isArray(s[t])||(s[t]=new Array(a)),r=0;a>r;++r)s[t][r]=s[r][t];else for(r=i;a>r;++r)for(t=0;i>t;++t)s[t][r]=s[r][t];o=a,this.rows=i,this.cols=o}return this},s.prototype.mulEach=function(r){var o=this.data,a=this.rows,i=this.cols,n=r.data,e=r.rows,h=r.cols;(a!==e||i!==h)&&t("mulEach",this,r);var c,f,u=new Array(i);for(c=0;a>c;++c)for(u[c]=new Array(i),f=0;i>f;++f)u[c][f]=o[c][f]*n[c][f];return new s(u)},s.prototype.mulEach_=function(r){var o=this.data,s=this.rows,a=this.cols,i=r.data,n=r.rows,e=r.cols;(s!==n||a!==e)&&t("mulEach_",this,r);var h,c;for(h=0;s>h;++h)for(c=0;a>c;++c)o[h][c]=o[h][c]*i[h][c];return this},s.prototype.plusEach=function(r){var o=this.data,a=this.rows,i=this.cols,n=r.data,e=r.rows,h=r.cols;(a!==e||i!==h)&&t("plusEach",this,r);var c,f,u=new Array(i);for(c=0;a>c;++c)for(u[c]=new Array(i),f=0;i>f;++f)u[c][f]=o[c][f]+n[c][f];return new s(u)},s.prototype.plusEach_=function(r){var o=this.data,s=this.rows,a=this.cols,i=r.data,n=r.rows,e=r.cols;(s!==n||a!==e)&&t("plusEach_",this,r);var h,c;for(h=0;s>h;++h)for(c=0;a>c;++c)o[h][c]=o[h][c]+i[h][c];return this},s.prototype.minusEach=function(r){var o=this.data,a=this.rows,i=this.cols,n=r.data,e=r.rows,h=r.cols;(a!==e||i!==h)&&t("minusEach",this,r);var c,f,u=new Array(i);for(c=0;a>c;++c)for(u[c]=new Array(i),f=0;i>f;++f)u[c][f]=o[c][f]-n[c][f];return new s(u)},s.prototype.minusEach_=function(r){var o=this.data,s=this.rows,a=this.cols,i=r.data,n=r.rows,e=r.cols;(s!==n||a!==e)&&t("minusEach_",this,r);var h,c;for(h=0;s>h;++h)for(c=0;a>c;++c)o[h][c]=o[h][c]-i[h][c];return this},s.prototype.dot=function(r){var o=this.data,a=this.rows,i=this.cols,n=r.data,e=r.rows,h=r.cols;i!==e&&t("dot",this,r);var c,f,u,w=new Array(a);for(c=0;a>c;++c)for(w[c]=new Array(h),u=0;h>u;++u)for(w[c][u]=0,f=0;e>f;++f)w[c][u]+=o[c][f]*n[f][u];return new s(w)},s.prototype.dot_=function(r){var o=this.data,s=this.rows,a=this.cols,i=r.data,n=r.rows,e=r.cols;a!==n&&t("dot_",this,r);var h,c,f,u;for(h=0;s>h;++h)for(u=o[h].slice(0,a),f=0;e>f;++f)for(o[h][f]=0,c=0;n>c;++c)o[h][f]+=u[c]*i[c][f];return this.cols=e,this},s.prototype.getSum=function(){for(var r=this.data,t=this.rows,o=this.cols,s=0,a=0;t>a;++a)for(var i=0;o>i;++i)s+=r[a][i];return s},s.prototype.map=function(r){var t,o,a=this.data,i=this.rows,n=this.cols,e=new Array(i);for(t=0;i>t;++t)for(e[t]=new Array(n),o=0;n>o;++o)e[t][o]=r(a[t][o]);return new s(e)},s.prototype.map_=function(r){var t,o,s=this.data,a=this.rows,i=this.cols;for(t=0;a>t;++t)for(o=0;i>o;++o)s[t][o]=r(s[t][o]);return this},s.prototype.log=function(){var r,t,o=this.data,a=this.rows,i=this.cols,n=new Array(a);for(r=0;a>r;++r)for(n[r]=new Array(i),t=0;i>t;++t)n[r][t]=Math.log(o[r][t]);return new s(n)},s.prototype.log_=function(){var r,t,o=this.data,s=this.rows,a=this.cols;for(r=0;s>r;++r)for(t=0;a>t;++t)o[r][t]=Math.log(o[r][t]);return this},s.prototype.sigmoid=function(){var r,t,o=this.data,a=this.rows,i=this.cols,n=new Array(a);for(r=0;a>r;++r)for(n[r]=new Array(i),t=0;i>t;++t)n[r][t]=1/(1+Math.exp(-o[r][t]));return new s(n)},s.prototype.sigmoid_=function(){var r,t,o=this.data,s=this.rows,a=this.cols;for(r=0;s>r;++r)for(t=0;a>t;++t)o[r][t]=1/(1+Math.exp(-o[r][t]));return this},s.prototype.mul=function(r){var t,o,a=this.data,i=this.rows,n=this.cols,e=new Array(i);for(t=0;i>t;++t)for(e[t]=new Array(n),o=0;n>o;++o)e[t][o]=a[t][o]*r;return new s(e)},s.prototype.mul_=function(r){var t,o,s=this.data,a=this.rows,i=this.cols;for(t=0;a>t;++t)for(o=0;i>o;++o)s[t][o]=s[t][o]*r;return this},s.prototype.plus=function(r){var t,o,a=this.data,i=this.rows,n=this.cols,e=new Array(i);for(t=0;i>t;++t)for(e[t]=new Array(n),o=0;n>o;++o)e[t][o]=a[t][o]+r;return new s(e)},s.prototype.plus_=function(r){var t,o,s=this.data,a=this.rows,i=this.cols;for(t=0;a>t;++t)for(o=0;i>o;++o)s[t][o]=s[t][o]+r;return this},o}});