!function(t,r){"use strict";"function"==typeof define&&define.amd?define([],r):"object"==typeof exports?module.exports=r():t.linearAlgebra=r()}(this,function(){"use strict";var t=function(t){throw new Error("linear-algebra: "+t)},r=function(r,o,s){t(r+": op1 is "+o.rows+" * "+o.cols+" and op2 is "+s.rows+" * "+s.cols)};return function(o){o=o||{};var s=o.add;s||t("options.add must be set for precision calculation");var i={},a=i.Matrix=function(t){Array.isArray(t[0])?(this.data=t,this.rows=this.data.length,this.cols=this.data[0]):(this.data=[t],this.rows=this.data[0],this.cols=t.length)};a.prototype.clone=function(){for(var t=this.data,r=this.rows,o=new Array(r),s=0;r>s;++s)o[s]=t[s].slice(0);return new a(o)},a.prototype.trans=function(){var t,r,o,s=this.data,i=this.rows,a=this.cols,n=a===i,h=a>i?i:a;for(t=0;h>t;++t)for(r=t+1;h>r;++r)o=s[r][t],s[r][t]=s[t][r],s[t][r]=o;if(!n){if(a>i)for(r=i;a>r;++r)for(Array.isArray(s[r])||(s[r]=new Array(i)),t=0;i>t;++t)s[r][t]=s[t][r];else for(t=a;i>t;++t)for(r=0;a>r;++r)s[r][t]=s[t][r];o=i,this.rows=a,this.cols=o}return this},a.identity=function(t){return a.scalar(t,1)},a.scalar=function(t,r){var o,s,i=new Array(t);for(o=0;t>o;++o){for(i[o]=new Array(t),s=0;t>s;++s)i[o][s]=0;i[o][o]=r}return new a(i)};i.Vector={zero:function(t){for(var r=new Array(t),o=0;t>o;++o)r[o]=0;return new a(r)}};return a.prototype.mulEach=function(t){var o=this.data,s=this.rows,i=this.cols,a=t.data,n=t.rows,h=t.cols;(s!==n||i!==h)&&r("mulEach",this,t);var e,c;for(e=0;s>e;++e)for(c=0;i>c;++c)o[e][c]*=a[e][c];return this},a.prototype.minusEach=function(t){var o=this.data,s=this.rows,i=this.cols,a=t.data,n=t.rows,h=t.cols;(s!==n||i!==h)&&r("minusEach",this,t);var e,c;for(e=0;s>e;++e)for(c=0;i>c;++c)o[e][c]-=a[e][c];return this},a.prototype.plusEach=function(t){var o=this.data,s=this.rows,i=this.cols,a=t.data,n=t.rows,h=t.cols;(s!==n||i!==h)&&r("plusEach",this,t);var e,c;for(e=0;s>e;++e)for(c=0;i>c;++c)o[e][c]+=a[e][c];return this},a.prototype.dot=function(t){var o=this.data,i=this.rows,a=this.cols,n=(t.data,t.rows),h=t.cols;a!==n&&r("dot",this,t);var e,c,f,u,l;for(e=0;i>e;++e)for(u=o[e].slice(0,a),f=0;h>f;++f){for(l=new Array(n),c=0;c<t.rows;++c)l[c]=u[f]*t[c][f];o[e][f]=s(l)}return this.cols=h,this},a.prototype.getSum=function(){for(var t=this.data,r=this.rows,o=this.cols,i=new Array(r*o),a=0;r>a;++a)for(var n=0;o>n;++n)i.push(t[a][n]);return s(i)},a.prototype.apply=function(t){var r,o,s=this.data,i=this.rows,a=this.cols;for(r=0;i>r;++r)for(o=0;a>o;++o)s[r][o]=t(s[r][o]);return this},a.prototype.ln=function(){var t,r,o=this.data,s=this.rows,i=this.cols;for(t=0;s>t;++t)for(r=0;i>r;++r)o[t][r]=Math.log(o[t][r]);return this},a.prototype.sigmoid=function(){var t,r,o=this.data,s=this.rows,i=this.cols;for(t=0;s>t;++t)for(r=0;i>r;++r)o[t][r]=1/(1+Math.exp(-o[t][r]));return this},a.prototype.mul=function(t){var r,o,s=this.data,i=this.rows,a=this.cols;for(r=0;i>r;++r)for(o=0;a>o;++o)s[r][o]*=t;return this},a.prototype.plus=function(t){var r,o,s=this.data,i=this.rows,a=this.cols;for(r=0;i>r;++r)for(o=0;a>o;++o)s[r][o]+=t;return this},i}});