!function(t,r){"use strict";"function"==typeof define&&define.amd?define([],r):"object"==typeof exports?module.exports=r():t.linearAlgebra=r()}(this,function(){"use strict";var t=function(t){throw new Error("linear-algebra: "+t)},r=function(t,r){t.super_=r,t.prototype=Object.create(r.prototype,{constructor:{value:t,enumerable:!1}})};return function(i){i=i||{};var o=i.add;o||t("options.add must be set for precision calculation");var s={},e=function(t){this._data=t};e.prototype.size=function(){return this._dim},e.prototype.data=function(){return this._data};var a=s.Vector=function(t){e.call(this,t),this._dim=t.length};r(a,e),Object.defineProperty(a.prototype,"isVector",{value:!0}),a.prototype.scale=function(t){for(var r=new Array(this._dim),i=0;i<this._dim;++i)r[i]=this._data[i]*t;return new a(r)},a.prototype.scaleP=function(t){for(var r=0;r<this._dim;++r)this._data[r]*=t;return this};var n=s.Matrix=function(t){e.call(this,t),this._rows=t.length,this._cols=t[0].length,this._dim=[this._rows,this._cols]};return r(n,e),Object.defineProperty(n.prototype,"isMatrix",{value:!0}),n.prototype.scale=function(t){for(var r=new Array(this._rows),i=0;i<this._rows;++i){r[i]=new Array(this._cols);for(var o=0;o<this._cols;++o)r[i][o]=this._data[i][o]*t}return new n(r)},n.prototype.scale=function(t){for(var r=new Array(this._rows),i=0;i<this._rows;++i){r[i]=new Array(this._cols);for(var o=0;o<this._cols;++o)r[i][o]=this._data[i][o]*t}return new n(r)},n.prototype.scaleP=function(t){for(var r=0;r<this._rows;++r)for(var i=0;i<this._cols;++i)this._data[r][i]*=t;return this},n.prototype.transpose=function(){var t,r,i=new Array(this._cols);for(r=0;r<this._cols;++r)for(i[r]=new Array(this._rows),t=0;t<this._rows;++t)i[r][t]=this._data[t][r];return new n(i)},n.identity=function(t){return n.scalar(t,1)},n.scalar=function(t,r){var i,o,s=new Array(t);for(i=0;t>i;++i){for(s[i]=new Array(t),o=0;t>o;++o)s[i][o]=0;s[i][i]=r}return new n(s)},a.prototype.dot=function(r){this._dim!==r._dim&&t("Vector dot product requires vectors to have same size");for(var i=new Array(this._dim),s=0;s<this._dim;++s)i[s]=this._data[s]*r._data[s];return o(i)},a.prototype.minus=function(r){this._dim!==r._dim&&t("Vector subtraction requires vectors to have same size");for(var i=new Array(this._dim),s=0;s<this._dim;++s)i[s]=o([this._data[s],-r._data[s]]);return new a(i)},a.prototype.minusP=function(r){this._dim!==r._dim&&t("Vector subtraction requires vectors to have same size");for(var i=0;i<this._dim;++i)this._data[i]=o([this._data[i],-r._data[i]]);return this},a.prototype.plus=function(r){this._dim!==r._dim&&t("Vector addition requires vectors to have same size");for(var i=new Array(this._dim),s=0;s<this._dim;++s)i[s]=o([this._data[s],r._data[s]]);return new a(i)},a.prototype.plusP=function(r){this._dim!==r._dim&&t("Vector addition requires vectors to have same size");for(var i=0;i<this._dim;++i)this._data[i]=o([this._data[i],r._data[i]]);return this},n.prototype.dot=function(r,i){this._cols!==i._dim&&t("Vector dot product requires this.columns = vector.size");for(var s=new Array(this._cols),e=0;e<this._cols;++e)s[e]=this._data[r][e]*i._data[e];return o(s)},n.prototype.mul=function(r){var i,s,e,c,_;if(r.isMatrix){for(this._cols!==r._rows&&t("Multiplying by matrix requires this.columns = matrix.rows"),i=new Array(this._rows),s=new Array(this._cols),e=0;e<this._rows;++e)for(i[e]=new Array(r._cols),_=0;_<r._cols;++_){for(c=0;c<this._cols;++c)s[c]=this._data[e][c]*r._data[c][_];i[e][_]=o(s)}return new n(i)}if(r.isVector){for(this._cols!==r._dim&&t("Multiplying by vector requires this.columns = vector.size"),i=new Array(this._rows),s=new Array(r._dim),e=0;e<this._rows;++e){for(c=0;c<this._cols;++c)s[c]=this._data[e][c]*r._data[c];i[e]=o(s)}return new a(i)}},s}});