!function(t,r){"use strict";"function"==typeof define&&define.amd?define([],r):"object"==typeof exports?module.exports=r():t.linearAlgebra=r()}(this,function(){"use strict";var t=function(t,r){t.super_=r,t.prototype=Object.create(r.prototype,{constructor:{value:t,enumerable:!1}})};return function(r){r=r||function(t){for(var r=t[0],o=1;o<t.length;++o)r+=t[o];return r};var o={},i=function(t){this._data=t};i.prototype.size=function(){return this._dim},i.prototype.data=function(){return this._data};var e=o.Vector=function(t){i.call(this,t),this._dim=t.length};t(e,i),Object.defineProperty(e.prototype,"isVector",{value:!0}),e.prototype.scale=function(t){for(var r=0;r<this._dim;++r)this._data[r]*=t;return this},e.prototype.dot=function(t){if(this._dim!==t._dim)throw new Error("Vector dot product requires vectors to have same size");for(var r=new Array(this._dim),o=0;o<this._dim;++o)r[o]=this._data[o]*t._data[o];return new e(r)};var s=o.Matrix=function(t){i.call(this,t),this._rows=t.length,this._cols=t[0].length,this._dim=[this._rows,this._cols]};return t(s,i),Object.defineProperty(s.prototype,"isMatrix",{value:!0}),s.prototype.scale=function(t){for(var r=0;r<this._rows;++r)for(var o=0;o<this._cols;++o)this._data[r][o]*=t;return this},s.prototype.mul=function(t){var o,i,n,a,c;if(t.isMatrix){if(this._cols!==t._rows)throw new Error("Multiplying by matrix requires this.columns = matrix.rows");for(o=new Array(this._rows),i=new Array(this._cols),n=0;n<this._rows;++n)for(o[n]=new Array(t._cols),c=0;c<t._cols;++c){for(a=0;a<this._cols;++a)i[a]=this._data[n][a]*t._data[a][c];o[n][c]=r(i)}return new s(o)}if(t.isVector){if(this._cols!==t._dim)throw new Error("Multiplying by vector requires this.columns = vector.size");for(o=new Array(this._rows),i=new Array(t._dim),n=0;n<this._rows;++n){for(a=0;a<this._cols;++a)i[a]=this._data[n][a]*t._data[a];o[n]=r(i)}return new e(o)}},s.prototype.transpose=function(){var t,r,o=new Array(this._cols);for(r=0;r<this._cols;++r)for(o[r]=new Array(this._rows),t=0;t<this._rows;++t)o[r][t]=this._data[t][r];return new s(o)},s.identity=function(t){return s.scalar(t,1)},s.scalar=function(t,r){var o,i,e=new Array(t);for(o=0;t>o;++o){for(e[o]=new Array(t),i=0;t>i;++i)e[o][i]=0;e[o][o]=r}return new s(e)},o}});